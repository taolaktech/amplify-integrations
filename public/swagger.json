{"openapi":"3.0.0","paths":{"/":{"get":{"operationId":"AppController_getHello","parameters":[],"responses":{"200":{"description":""}},"tags":["App"]}},"/health-check":{"get":{"operationId":"HealthcheckController_index","parameters":[],"responses":{"200":{"description":"The Health Check is successful","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"ok"},"info":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"error":{"type":"object","example":{},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"details":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true}}}}}}},"503":{"description":"The Health Check is not successful","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"error"},"info":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"error":{"type":"object","example":{"redis":{"status":"down","message":"Could not connect"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"details":{"type":"object","example":{"database":{"status":"up"},"redis":{"status":"down","message":"Could not connect"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true}}}}}}}},"tags":["Healthcheck"]}},"/api/shopify/auth/callback":{"get":{"operationId":"ShopifyController_shopifyOauthCallback","parameters":[],"responses":{"200":{"description":""}},"security":[{"x-api-key":[]}],"tags":["Shopify"]}},"/api/shopify/auth/url":{"post":{"operationId":"ShopifyController_shopifyOauthUrl","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetShopifyOAuthUrlDto"}}}},"responses":{"201":{"description":""}},"security":[{"x-api-key":[]}],"tags":["Shopify"]}},"/api/shopify/shop-details":{"post":{"operationId":"ShopifyController_getShopDetails","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetShopDto"}}}},"responses":{"201":{"description":""}},"security":[{"x-api-key":[]}],"tags":["Shopify"]}},"/api/shopify/shop-branding":{"post":{"operationId":"ShopifyController_getShopBrandingInfo","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetShopBrandingDto"}}}},"responses":{"201":{"description":""}},"security":[{"x-api-key":[]}],"tags":["Shopify"]}},"/api/shopify/products":{"post":{"operationId":"ShopifyController_getAllProducts","parameters":[{"name":"before","required":false,"in":"query","schema":{"type":"string"}},{"name":"last","required":false,"in":"query","schema":{"type":"number"}},{"name":"after","required":false,"in":"query","schema":{"type":"string"}},{"name":"first","required":false,"in":"query","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetProductsDto"}}}},"responses":{"201":{"description":""}},"security":[{"x-api-key":[]}],"tags":["Shopify"]}},"/api/shopify/products/product-by-id":{"post":{"operationId":"ShopifyController_getProductById","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetProductByIdDto"}}}},"responses":{"201":{"description":""}},"security":[{"x-api-key":[]}],"tags":["Shopify"]}},"/api/shopify/orders":{"post":{"operationId":"ShopifyController_getOrders","parameters":[{"name":"query","required":false,"in":"query","schema":{"example":"financial_status:paid created_at:>=2024-06-01","type":"string"}},{"name":"before","required":false,"in":"query","schema":{"example":"","type":"string"}},{"name":"last","required":false,"in":"query","schema":{"example":10,"type":"number"}},{"name":"after","required":false,"in":"query","schema":{"example":"","type":"string"}},{"name":"first","required":false,"in":"query","schema":{"example":10,"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetProductsDto"}}}},"responses":{"201":{"description":""}},"security":[{"x-api-key":[]}],"tags":["Shopify"]}},"/api/shopify/orders-count":{"post":{"operationId":"ShopifyController_getOrdersCount","parameters":[{"name":"query","required":false,"in":"query","schema":{"example":"financial_status:paid created_at:>=2024-06-01","type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetProductsDto"}}}},"responses":{"201":{"description":""}},"security":[{"x-api-key":[]}],"tags":["Shopify"]}},"/shopify/webhook":{"post":{"operationId":"WebhookController_handleShopifyWebhook","parameters":[],"responses":{"201":{"description":""}},"tags":["Webhook"]}},"/nanobanana/webhook":{"post":{"operationId":"NanobananaWebhookController_handleCallback","parameters":[],"responses":{"200":{"description":""}},"summary":"Nanobanana callback webhook","tags":["Nanobanana Webhook"]}},"/internal/media-generation/initiate-video-gen":{"post":{"operationId":"MediaGenerationController_initiateVideoGeneration","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateVideoGenerationDto"}}}},"responses":{"201":{"description":""}},"security":[{"x-api-key":[]}],"summary":"Create a video generation job (internal)","tags":["Media Generation (Internal)"]}},"/internal/media-generation/initiate-image-gen":{"post":{"operationId":"MediaGenerationController_initiateImageGeneration","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateImageGenerationDto"}}}},"responses":{"201":{"description":""}},"security":[{"x-api-key":[]}],"summary":"Create an image generation job (internal)","tags":["Media Generation (Internal)"]}},"/api/google-ads/auth/url":{"get":{"description":"Returns the Google OAuth URL for authentication.","operationId":"GoogleAdsAuthController_getAuthUrl","parameters":[],"responses":{"200":{"description":""}},"summary":"Get Google Auth URL","tags":["GoogleAdsAuth"]}},"/api/google-ads/auth/redirect":{"get":{"description":"Handles the OAuth redirect from Google and redirects to the frontend with code, state, and platform.","operationId":"GoogleAdsAuthController_googleAuthCallback","parameters":[{"name":"code","required":true,"in":"query","schema":{"type":"string"}},{"name":"state","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"summary":"Google Auth Redirect","tags":["GoogleAdsAuth"]}},"/api/google-ads/auth/callback":{"get":{"description":"Endpoint for the frontend to call after Google redirects back with code and state. Persists tokens, user profile, and accessible customers.","operationId":"GoogleAdsAuthController_googleAuthFrontendCallback","parameters":[{"name":"state","required":true,"in":"query","description":"OAuth state token","schema":{}},{"name":"code","required":true,"in":"query","description":"Authorization code","schema":{}}],"responses":{"200":{"description":""}},"summary":"Google Auth Callback (Frontend)","tags":["GoogleAdsAuth"]}},"/api/google-ads/customers/accessible-customers":{"get":{"description":"Returns the stored list of accessible Google Ads customers for the authenticated user's primary Google Ads connection.","operationId":"GoogleAdsCustomersController_getPrimaryAccessibleCustomers","parameters":[],"responses":{"200":{"description":""}},"security":[{"x-api-key":[]}],"summary":"Get accessible customers for primary connection","tags":["GoogleAdsCustomers"]}},"/api/google-ads/customers/accessible-customers/list":{"get":{"description":"Lists accessible Google Ads customers for a connection. If authenticated with TokenAuthGuard and connectionId is not provided, uses the user's business primary Google Ads connection.","operationId":"GoogleAdsCustomersController_listAccessibleCustomers","parameters":[{"name":"connectionId","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"x-api-key":[]}],"summary":"List accessible customers","tags":["GoogleAdsCustomers"]}},"/api/google-ads/customers/set-primary-customer-account":{"post":{"description":"Sets primaryCustomerAccount on the authenticated user's primary Google Ads connection.","operationId":"GoogleAdsCustomersController_setPrimaryCustomerAccount","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SetPrimaryCustomerAccountDto"}}}},"responses":{"201":{"description":""}},"security":[{"x-api-key":[]}],"summary":"Set primary customer account for primary connection","tags":["GoogleAdsCustomers"]}},"/api/google-ads/campaign-orchestration/step-1":{"post":{"description":"Idempotently creates budget, target ROAS bidding strategy, and campaign for a given campaignId. Persists state in google-ads-campaigns.","operationId":"GoogleAdsCampaignOrchestrationController_step1","parameters":[],"responses":{"201":{"description":""}},"security":[{"x-api-key":[]}],"summary":"Google Ads orchestration step 1 (budget + bidding strategy + campaign)","tags":["GoogleAdsCampaignOrchestration"]}},"/api/google-ads/campaign-orchestration/step-2":{"post":{"description":"Idempotently creates a single ad group and loads all creatives as responsive search ads into that ad group. Uses state persisted in google-ads-campaigns by step 1.","operationId":"GoogleAdsCampaignOrchestrationController_step2","parameters":[],"responses":{"201":{"description":""}},"security":[{"x-api-key":[]}],"summary":"Google Ads orchestration step 2 (ad group + ads)","tags":["GoogleAdsCampaignOrchestration"]}},"/api/google-ads/campaign-orchestration/step-3":{"post":{"description":"Idempotently generates keyword ideas and adds keywords to all ad groups. Uses state persisted in google-ads-campaigns by steps 1 & 2.","operationId":"GoogleAdsCampaignOrchestrationController_step3","parameters":[],"responses":{"201":{"description":""}},"security":[{"x-api-key":[]}],"summary":"Google Ads orchestration step 3 (keywords)","tags":["GoogleAdsCampaignOrchestration"]}},"/api/google-ads/campaign-orchestration/step-4":{"post":{"description":"Idempotently adds geo targeting to the Google Ads campaign based on Campaign.location. Uses state persisted in google-ads-campaigns by step 1.","operationId":"GoogleAdsCampaignOrchestrationController_step4","parameters":[],"responses":{"201":{"description":""}},"security":[{"x-api-key":[]}],"summary":"Google Ads orchestration step 4 (geo targeting)","tags":["GoogleAdsCampaignOrchestration"]}},"/api/google-ads/campaign-orchestration/step-5":{"post":{"description":"Idempotently enables the Google Ads campaign by setting status=ENABLED. Uses state persisted in google-ads-campaigns by step 1.","operationId":"GoogleAdsCampaignOrchestrationController_step5","parameters":[],"responses":{"201":{"description":""}},"security":[{"x-api-key":[]}],"summary":"Google Ads orchestration step 5 (enable campaign)","tags":["GoogleAdsCampaignOrchestration"]}},"/facebook/internal/users/{userId}/primary-ad-account":{"get":{"description":"Used by Lambda functions to get the primary Facebook ad account for campaign creation. Requires API key authentication.","operationId":"InternalFacebookController_getUserPrimaryAdAccountForLambda","parameters":[{"name":"userId","required":true,"in":"path","description":"User ID (MongoDB ObjectId)","schema":{"type":"string"}}],"responses":{"200":{"description":"Primary ad account retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"accountId":{"type":"string","example":"act_1087932189349950"},"name":{"type":"string","example":"My Store Ads"},"currency":{"type":"string","example":"USD"},"integrationStatus":{"type":"string","example":"READY_FOR_CAMPAIGNS"}}}}}}}},"404":{"description":"User has no ready ad account for campaigns"}},"summary":"Get user's primary ad account for campaign creation","tags":["Internal Facebook Campaign Controller"]}},"/facebook/internal/users/{userId}/primary-instagram-account":{"get":{"description":"Retrieves the user's primary Instagram account.","operationId":"InternalFacebookController_getPrimaryInstagramAccount","parameters":[{"name":"userId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Primary Instagram account retrieved successfully"}},"summary":"Get primary Instagram account","tags":["Internal Facebook Campaign Controller"]}},"/facebook/internal/ads/insights":{"post":{"description":"Retrieves insights from the adId sent","operationId":"InternalFacebookController_retrieveMetaAdInsights","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdsInsightsDto"}}}},"responses":{"200":{"description":"List of Ad insights"}},"summary":"Get insights from facebook on multiple Ads","tags":["Internal Facebook Campaign Controller"]}},"/facebook/internal/campaign/insights":{"post":{"description":"Retrieves insights from the campaignIds sent","operationId":"InternalFacebookController_retrieveMetaCampaignInsights","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignInsightsDto"}}}},"responses":{"200":{"description":"List of Campaign insights"}},"summary":"Get insights from facebook on multiple campaigns","tags":["Internal Facebook Campaign Controller"]}},"/facebook-campaigns/initialize":{"post":{"description":"Creates the main Facebook campaign structure. This is step 1 of the campaign creation process.","operationId":"FacebookCampaignController_initializeCampaign","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InitializeCampaignDto"}}}},"responses":{"200":{"description":"Campaign initialization started successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignStepResponse"}}}},"400":{"description":"Invalid campaign data or user ad account not ready"}},"summary":"Initialize Facebook campaign creation","tags":["Facebook Campaign Creation"]}},"/facebook-campaigns/{campaignId}/create-adsets":{"post":{"description":"Creates a single Ad Set for the campaign, using the allocated budget and targeting from campaign data. This is step 2.","operationId":"FacebookCampaignController_createAdSets","parameters":[{"name":"campaignId","required":true,"in":"path","description":"Amplify Campaign ID","schema":{"type":"string"}},{"name":"platform","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Ad Set created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"currentStep":{"type":"string","example":"ADSETS_CREATED"},"nextStep":{"type":"string","example":"CREATE_CREATIVES"},"message":{"type":"string","example":"Created 1 ad set successfully"},"data":{"type":"object","properties":{"adSetsCreated":{"type":"number","example":1},"adSetIds":{"type":"array","items":{"type":"string"},"example":["fb_adset_123"]},"adSetName":{"type":"string","example":"Amplify AdSet - Product Launch - campaign_id_here"}}}}}}}},"400":{"description":"Bad request (e.g., campaign not initialized, invalid data)"},"404":{"description":"Facebook campaign tracking document not found"}},"summary":"Create Facebook Ad Sets","tags":["Facebook Campaign Creation"]}},"/facebook-campaigns/{campaignId}/create-creatives":{"post":{"description":"Collects all assets (images, text, etc.) from the campaign and creates a single dynamic/flexible creative asset on Facebook. This is step 3.","operationId":"FacebookCampaignController_createCreatives","parameters":[{"name":"campaignId","required":true,"in":"path","description":"Amplify Campaign ID","schema":{"type":"string"}},{"name":"platform","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"summary":"Create a single Flexible Ad Creative","tags":["Facebook Campaign Creation"]}},"/facebook-campaigns/{campaignId}/create-ads":{"post":{"description":"Creates individual ads linking creatives to ad sets. This is step 4 of the campaign creation process.","operationId":"FacebookCampaignController_createAds","parameters":[{"name":"campaignId","required":true,"in":"path","schema":{"type":"string"}},{"name":"platform","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"summary":"Create Facebook Ads","tags":["Facebook Campaign Creation"]}},"/facebook-campaigns/{campaignId}/launch":{"post":{"description":"Submits the campaign for Facebook review and activates it. This is the final step.","operationId":"FacebookCampaignController_launchCampaign","parameters":[{"name":"campaignId","required":true,"in":"path","schema":{"type":"string"}},{"name":"platform","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"summary":"Launch Facebook Campaign","tags":["Facebook Campaign Creation"]}},"/facebook-campaigns/{campaignId}/status":{"get":{"description":"Returns the current step and status of the campaign creation process. Useful for polling and orchestration.","operationId":"FacebookCampaignController_getCampaignStatus","parameters":[{"name":"campaignId","required":true,"in":"path","schema":{"type":"string"}},{"name":"platform","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Status retrieved successfully."},"404":{"description":"Campaign not found."}},"summary":"Get campaign creation status","tags":["Facebook Campaign Creation"]}},"/facebook-campaigns/{campaignId}/retry-step":{"post":{"description":"If a step in the creation process fails, this endpoint allows the orchestrator (Lambda) to retry it.","operationId":"FacebookCampaignController_retryFailedStep","parameters":[{"name":"campaignId","required":true,"in":"path","schema":{"type":"string"}},{"name":"platform","required":true,"in":"query","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RetryStepDto"}}}},"responses":{"200":{"description":"The step was retried successfully.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignStepResponse"}}}},"400":{"description":"The step is not in a retryable state or the retry limit was exceeded."},"404":{"description":"Campaign not found."}},"summary":"Retry a failed campaign creation step","tags":["Facebook Campaign Creation"]}},"/facebook-campaigns/{campaignId}/pause":{"post":{"description":"Pauses the campaign, all ad sets, and all ads on Facebook/Instagram.","operationId":"FacebookCampaignController_pauseCampaign","parameters":[{"name":"campaignId","required":true,"in":"path","description":"Amplify Campaign ID","schema":{"type":"string"}},{"name":"platform","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"summary":"Pause an active campaign","tags":["Facebook Campaign Creation"]}},"/facebook-campaigns/{campaignId}/resume":{"post":{"description":"Resumes the campaign, all ad sets, and all ads on Facebook/Instagram.","operationId":"FacebookCampaignController_resumeCampaign","parameters":[{"name":"campaignId","required":true,"in":"path","description":"Amplify Campaign ID","schema":{"type":"string"}},{"name":"platform","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"summary":"Resume a paused campaign","tags":["Facebook Campaign Creation"]}},"/facebook-auth":{"get":{"description":"Redirects user to Facebook OAuth consent page to authorize Amplify access to their ad accounts and pages.","operationId":"FacebookAuthController_redirectToFacebook","parameters":[{"name":"platforms","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Redirect to Facebook OAuth consent page"},"500":{"description":"Failed to generate OAuth URL"}},"security":[{"bearer":[]}],"summary":"Initiate Facebook OAuth","tags":["Facebook Authentication"]}},"/facebook-auth/callback":{"get":{"description":"Processes the OAuth callback from Facebook, exchanges code for tokens, and stores user's ad accounts and pages.","operationId":"FacebookAuthController_handleCallback","parameters":[{"name":"state","required":true,"in":"query","description":"State token for security validation","schema":{}},{"name":"code","required":true,"in":"query","description":"Authorization code from Facebook","schema":{}}],"responses":{"200":{"description":"OAuth callback processed successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FacebookOAuthCallbackResponse"}}}},"400":{"description":"Invalid callback parameters or state token"},"401":{"description":"Invalid or expired state token"},"500":{"description":"Failed to process OAuth callback"}},"security":[{"bearer":[]}],"summary":"Handle Facebook OAuth callback","tags":["Facebook Authentication"]}},"/facebook-auth/ad-accounts":{"get":{"description":"Retrieves all Facebook ad accounts connected to the user with their integration status, permissions, and capabilities.","operationId":"FacebookAuthController_fetchUserAdAccounts","parameters":[],"responses":{"200":{"description":"Ad accounts retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdAccountsListResponse"}}}},"401":{"description":"User not authenticated"},"500":{"description":"Failed to fetch ad accounts"}},"security":[{"bearer":[]}],"summary":"Get user's Facebook ad accounts","tags":["Facebook Authentication"]}},"/facebook-auth/ad-accounts/{accountId}":{"delete":{"description":"Removes a Facebook ad account from the user's connected accounts. Cannot remove primary account.","operationId":"FacebookAuthController_removeAdAccount","parameters":[{"name":"accountId","required":true,"in":"path","description":"Facebook ad account ID (e.g., act_1234567890)","schema":{"type":"string"}}],"responses":{"200":{"description":"Ad account removed successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RemoveAccountResponse"}}}},"400":{"description":"Cannot remove primary ad account"},"401":{"description":"User not authenticated"},"404":{"description":"Ad account not found"}},"security":[{"bearer":[]}],"summary":"Remove Facebook ad account","tags":["Facebook Authentication"]}},"/facebook-auth/instagram-accounts":{"get":{"description":"Retrieves all Instagram business accounts connected to the user Facebook pages.","operationId":"FacebookAuthController_fetchUserInstagramAccounts","parameters":[],"responses":{"200":{"description":"Instagram accounts retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstagramAccountsListResponse"}}}}},"security":[{"bearer":[]}],"summary":"Get user's Instagram accounts","tags":["Facebook Authentication"]}},"/facebook-auth/instagram-accounts/primary/select":{"post":{"description":"Sets an Instagram account as primary for campaign creation.","operationId":"FacebookAuthController_selectPrimaryInstagramAccount","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SelectPrimaryInstagramAccountDto"}}}},"responses":{"200":{"description":"Primary Instagram account selected successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SelectPrimaryInstagramAccountResponse"}}}}},"security":[{"bearer":[]}],"summary":"Select primary Instagram account","tags":["Facebook Authentication"]}},"/facebook-auth/instagram-accounts/primary":{"get":{"description":"Retrieves the user's primary Instagram account.","operationId":"FacebookAuthController_getPrimaryInstagramAccount","parameters":[],"responses":{"200":{"description":"Primary Instagram account retrieved successfully"}},"security":[{"bearer":[]}],"summary":"Get primary Instagram account","tags":["Facebook Authentication"]}},"/facebook-auth/instagram-setup-status":{"get":{"description":"Checks if user has Instagram Business accounts connected to their Facebook pages.","operationId":"FacebookAuthController_checkInstagramSetupStatus","parameters":[],"responses":{"200":{"description":"Instagram setup status retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InstagramSetupStatusResponse"}}}}},"security":[{"bearer":[]}],"summary":"Check Instagram setup status","tags":["Facebook Authentication"]}},"/facebook-auth/instagram-setup-guide":{"get":{"description":"Provides instructions for connecting Instagram Business accounts to Facebook pages for advertising and integration.","operationId":"FacebookAuthController_getInstagramSetupGuide","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Get Instagram setup guide","tags":["Facebook Authentication"]}},"/facebook-auth/ad-accounts/primary/select":{"post":{"description":"Sets an ad account as primary and requests system user permissions for campaign management. This enables Amplify to create campaigns on the user's behalf.","operationId":"FacebookAuthController_selectPrimaryAdAccount","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SelectPrimaryAdAccountDto"}}}},"responses":{"200":{"description":"Primary ad account selected and system user permissions requested","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SelectPrimaryResponse"}}}},"400":{"description":"Invalid ad account ID or system user assignment failed"},"401":{"description":"User not authenticated or invalid Facebook permissions"},"403":{"description":"Ad account not found or access denied"}},"security":[{"bearer":[]}],"summary":"Select primary ad account","tags":["Facebook Authentication"]}},"/facebook-auth/ad-accounts/primary":{"get":{"description":"Retrieves the user's primary ad account with full integration status, permissions, and campaign readiness information.","operationId":"FacebookAuthController_getPrimaryAdAccount","parameters":[],"responses":{"200":{"description":"Primary ad account retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PrimaryAccountResponse"}}}},"401":{"description":"User not authenticated"},"500":{"description":"Failed to get primary ad account"}},"security":[{"bearer":[]}],"summary":"Get primary ad account","tags":["Facebook Authentication"]}},"/facebook-auth/token-status":{"get":{"description":"Checks the health and expiration status of the user's Facebook access token. Provides re-authentication URL if token needs renewal.","operationId":"FacebookAuthController_getTokenStatus","parameters":[],"responses":{"200":{"description":"Token status retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenStatusResponse"}}}},"401":{"description":"User not authenticated"},"500":{"description":"Failed to check token status"}},"security":[{"bearer":[]}],"summary":"Get Facebook token status","tags":["Facebook Authentication"]}},"/facebook-auth/ad-accounts/{accountId}/permission-status":{"get":{"operationId":"FacebookAuthController_getPermissionStatus","parameters":[{"name":"accountId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["Facebook Authentication"]}},"/facebook-auth/ad-accounts/refresh":{"post":{"description":"Syncs user's ad accounts from Facebook API, detects new accounts, updates existing ones, and checks system user permissions for all accounts.","operationId":"FacebookAuthController_refreshAdAccounts","parameters":[],"responses":{"200":{"description":"Ad accounts refreshed successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshAccountsResponse"}}}},"401":{"description":"User not authenticated or Facebook token expired"},"500":{"description":"Failed to refresh ad accounts"}},"security":[{"bearer":[]}],"summary":"Refresh ad accounts from Facebook","tags":["Facebook Authentication"]}},"/facebook-auth/ad-accounts/{accountId}/generate-meta-pixel-id":{"post":{"operationId":"FacebookAuthController_generateMetaPixelId","parameters":[{"name":"accountId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateMetaPixelDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"tags":["Facebook Authentication"]}},"/facebook-auth/ad-accounts/{adAccountId}/pages":{"get":{"description":"Returns all Facebook pages that belong to the specified ad account","operationId":"FacebookAuthController_getAdAccountPages","parameters":[{"name":"adAccountId","required":true,"in":"path","description":"Facebook Ad Account ID","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Get pages for a specific ad account","tags":["Facebook Authentication"]}},"/api/integrations/status":{"get":{"description":"Returns Business.integrations plus frontend-friendly booleans and key connection details for each platform.","operationId":"IntegrationsController_getStatus","parameters":[],"responses":{"200":{"description":""}},"summary":"Get integrations connection status","tags":["Integrations"]}},"/api/integrations/disconnect":{"post":{"description":"Disconnects the given platform for the authenticated user by clearing Business.integrations and platform-specific connection state.","operationId":"IntegrationsController_disconnect","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DisconnectIntegrationDto"}}}},"responses":{"201":{"description":""}},"summary":"Disconnect an integration platform","tags":["Integrations"]}}},"info":{"title":"Amplify-Integrations Api","description":"Amplify Integrations Api","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"},"x-api-key":{"type":"apiKey","in":"header","name":"x-api-key"}},"schemas":{"GetShopifyOAuthUrlDto":{"type":"object","properties":{"shop":{"type":"string"},"userId":{"type":"string"},"redirect":{"type":"string"}},"required":["shop","userId","redirect"]},"GetShopDto":{"type":"object","properties":{"shop":{"type":"string"},"accessToken":{"type":"string"},"scope":{"type":"string"}},"required":["shop","accessToken","scope"]},"GetShopBrandingDto":{"type":"object","properties":{"shop":{"type":"string"},"accessToken":{"type":"string"},"scope":{"type":"string"}},"required":["shop","accessToken","scope"]},"GetProductsDto":{"type":"object","properties":{"shop":{"type":"string"},"accessToken":{"type":"string"},"scope":{"type":"string"}},"required":["shop","accessToken","scope"]},"GetProductByIdDto":{"type":"object","properties":{"shop":{"type":"string"},"accessToken":{"type":"string"},"scope":{"type":"string"},"productId":{"type":"string"},"handle":{"type":"string"}},"required":["shop","accessToken","scope","productId","handle"]},"CreateVideoGenerationDto":{"type":"object","properties":{"campaignId":{"type":"string","description":"Campaign id (MongoDB ObjectId)"},"businessId":{"type":"string","description":"Business id (MongoDB ObjectId)"},"videoPresetId":{"type":"string","description":"Video preset id (MongoDB ObjectId)"},"prompt":{"type":"string","description":"Prompt for video generation"},"provider":{"type":"string","enum":["openai"],"default":"openai"},"model":{"type":"string","enum":["sora-2","sora-2-pro"],"default":"sora-2"},"seconds":{"type":"string","enum":["4","8","12"],"default":"8"},"size":{"type":"string","example":"1280x720","enum":["720x1280","1280x720","1024x1792","1792x1024"],"description":"Resolution formatted as widthxheight"},"quality":{"type":"string","enum":["standard","high"],"default":"standard"}},"required":["campaignId","businessId","videoPresetId","prompt","provider"]},"CreateImageGenerationDto":{"type":"object","properties":{"businessId":{"type":"string","description":"Business id (MongoDB ObjectId)"},"prompt":{"type":"string","description":"Prompt for image generation/editing"},"imagePresetId":{"type":"string","description":"Media preset id"},"provider":{"type":"string","enum":["nanobanana"],"default":"nanobanana"},"type":{"type":"string","enum":["TEXTTOIAMGE","IMAGETOIAMGE"],"default":"TEXTTOIAMGE"},"numImages":{"type":"number","minimum":1,"maximum":4,"default":1},"imageSize":{"type":"string","description":"1:1, 9:16, 16:9, 3:4, 4:3, 3:2, 2:3, 5:4, 4:5, 21:9","enum":["1:1","9:16","16:9","3:4","4:3","3:2","2:3","5:4","4:5","21:9"]},"imageUrls":{"description":"Input image URLs for IMAGETOIAMGE mode","type":"array","items":{"type":"string"}},"waterMark":{"type":"string"}},"required":["businessId","prompt"]},"SetPrimaryCustomerAccountDto":{"type":"object","properties":{"primaryCustomerAccount":{"type":"string"}},"required":["primaryCustomerAccount"]},"AdsInsightsDto":{"type":"object","properties":{"adIds":{"type":"array","description":"An array of ads IDs","items":{"oneOf":[{"type":"string"},{"type":"number"}]}}},"required":["adIds"]},"CampaignInsightsDto":{"type":"object","properties":{"campaignIds":{"type":"array","description":"An array of campign IDs","items":{"oneOf":[{"type":"string"},{"type":"number"}]}}},"required":["campaignIds"]},"CampaignLocationDto":{"type":"object","properties":{"country":{"type":"string","description":"Country code","example":"US"}},"required":["country"]},"CreativeDto":{"type":"object","properties":{"id":{"type":"string","description":"Creative ID","example":"creative_123"},"channel":{"type":"string","description":"Advertising channel","example":"facebook","enum":["facebook","instagram","google"]},"data":{"description":"Creative data URLs","example":["{\"url\":\"http://s3.image.com/fb-ad-1\"}"],"type":"array","items":{"type":"string"}}},"required":["id","channel","data"]},"ProductDto":{"type":"object","properties":{"shopifyId":{"type":"string","description":"Shopify product ID","example":"gid://shopify/Product/123456789"},"title":{"type":"string","description":"Product title","example":"Premium Wireless Headphones"},"price":{"type":"number","description":"Product price","example":199.99},"description":{"type":"string","description":"Product description","example":"High-quality wireless headphones with noise cancellation"},"audience":{"type":"string","description":"Target audience for this product","example":"Young professionals"},"occasion":{"type":"string","description":"Occasion for this product","example":"Birthday gift"},"features":{"description":"Product features","example":["Noise cancellation","30-hour battery","Bluetooth 5.0"],"type":"array","items":{"type":"string"}},"category":{"type":"string","description":"Product category","example":"Electronics"},"imageLinks":{"description":"Product image URLs","example":["https://example.com/images/product-123.jpg"],"type":"array","items":{"type":"string"}},"productLink":{"type":"string","description":"Product page URL","example":"https://shop.com/products/premium-headphones"},"creatives":{"description":"Creatives for this product","type":"array","items":{"$ref":"#/components/schemas/CreativeDto"}}},"required":["shopifyId","title","price","description","features","category","imageLinks","productLink","creatives"]},"CampaignDataFromLambdaClass":{"type":"object","properties":{"name":{"type":"string","description":"Name of the Campaign","example":"Black Friday"},"shopifyAccountId":{"type":"string","description":"ObjectId of the Shopify Account","example":"68df9d74971b4143c38e00f7"},"campaignId":{"type":"string","description":"MongoDB ObjectId as string","example":"507f1f77bcf86cd799439011"},"id":{"type":"string","description":"MongoDB ObjectId as string","example":"507f1f77bcf86cd799439011"},"pageId":{"type":"string","description":"Facebook Page ID","example":"86210912001"},"metaPixelId":{"type":"string","description":"Meta Pixel ID for tracking","example":"1234567890"},"userId":{"type":"string","description":"User ID who created the campaign","example":"user_123456789"},"businessId":{"type":"string","description":"Business ID this campaign belongs to","example":"business_987654321"},"type":{"type":"string","description":"Campaign type","example":"PRODUCT_LAUNCH"},"brandColor":{"type":"string","description":"Brand primary color","example":"#FF5733"},"accentColor":{"type":"string","description":"Brand accent color","example":"#33FF57"},"tone":{"type":"string","description":"Tone for ad copy","example":"Professional"},"startDate":{"type":"string","description":"Campaign start date (ISO string)","example":"2024-01-01T00:00:00.000Z"},"endDate":{"type":"string","description":"Campaign end date (ISO string)","example":"2024-12-31T23:59:59.999Z"},"totalBudget":{"type":"number","description":"Total budget across all platforms","example":5000},"platforms":{"type":"array","description":"Advertising platforms","example":["FACEBOOK","INSTAGRAM","GOOGLE"],"items":{"type":"string","enum":["FACEBOOK","INSTAGRAM","GOOGLE"]}},"location":{"description":"Targeting locations","type":"array","items":{"$ref":"#/components/schemas/CampaignLocationDto"}},"products":{"description":"Products to advertise","type":"array","items":{"$ref":"#/components/schemas/ProductDto"}},"instagramAccountId":{"type":"string","description":"User Instagram ID","example":"17841476275533415"}},"required":["name","shopifyAccountId","campaignId","id","pageId","metaPixelId","userId","businessId","type","brandColor","accentColor","tone","startDate","endDate","totalBudget","platforms","location","products","instagramAccountId"]},"InitializeCampaignDto":{"type":"object","properties":{"campaignData":{"description":"Campaign data from Amplify-Manager via Lambda","allOf":[{"$ref":"#/components/schemas/CampaignDataFromLambdaClass"}]},"userAdAccountId":{"type":"string","description":"User Ad Account ID","example":"act_123456789012345"},"instagramAccountId":{"type":"string","description":"User Instagram ID","example":"17841476275533415"}},"required":["campaignData","userAdAccountId","instagramAccountId"]},"CampaignStepResponse":{"type":"object","properties":{}},"RetryStepDto":{"type":"object","properties":{"step":{"type":"string","example":"CREATING_ADSETS","description":"The step that failed and needs to be retried.","enum":["INITIALIZING","CREATING_ADSETS","CREATING_CREATIVES","CREATING_ADS","LAUNCHING"]}},"required":["step"]},"SystemUserPermissionDto":{"type":"object","properties":{"assignmentStatus":{"type":"string","example":"ASSIGNED","enum":["NOT_REQUESTED","ASSIGNMENT_PENDING","ASSIGNED","ASSIGNMENT_FAILED"]},"grantedTasks":{"example":["MANAGE","ADVERTISE","ANALYZE"],"type":"array","items":{"type":"string"}},"lastStatusCheck":{"format":"date-time","type":"string","example":"2024-01-01T10:00:00Z"},"assignmentError":{"type":"string","example":"Permission check failed"}},"required":["assignmentStatus","grantedTasks","lastStatusCheck"]},"CapabilitiesDto":{"type":"object","properties":{"canCreateCampaigns":{"type":"boolean","example":true},"canManageAds":{"type":"boolean","example":true},"canViewInsights":{"type":"boolean","example":true},"grantedTasks":{"example":["MANAGE","ADVERTISE","ANALYZE"],"type":"array","items":{"type":"string"}},"missingTasks":{"example":[],"type":"array","items":{"type":"string"}}},"required":["canCreateCampaigns","canManageAds","canViewInsights","grantedTasks","missingTasks"]},"FacebookAdAccountDto":{"type":"object","properties":{"accountId":{"type":"string","example":"act_1087932189349950"},"name":{"type":"string","example":"My Store Ads"},"currency":{"type":"string","example":"USD"},"businessName":{"type":"string","example":"My Business"},"isPrimary":{"type":"boolean","example":true},"integrationStatus":{"type":"string","example":"READY_FOR_CAMPAIGNS","enum":["SETUP_INCOMPLETE","SYSTEM_USER_ASSIGNED","ASSIGNMENT_FAILED","READY_FOR_CAMPAIGNS"]},"systemUserPermission":{"$ref":"#/components/schemas/SystemUserPermissionDto"},"capabilities":{"$ref":"#/components/schemas/CapabilitiesDto"}},"required":["accountId","isPrimary","integrationStatus"]},"InstagramAccountDto":{"type":"object","properties":{"instagramAccountId":{"type":"string","example":"17841400000000000"},"username":{"type":"string","example":"mybusiness"},"accountType":{"type":"string","example":"BUSINESS","enum":["BUSINESS","CREATOR"]},"followersCount":{"type":"number","example":1500},"mediaCount":{"type":"number","example":42},"pageId":{"type":"string","example":"123456789012345"},"pageName":{"type":"string","example":"My Business Page"},"isPrimary":{"type":"boolean","example":false}},"required":["instagramAccountId","username","accountType","followersCount","mediaCount","pageId","pageName","isPrimary"]},"OAuthCallbackDataDto":{"type":"object","properties":{"adAccounts":{"type":"array","items":{"$ref":"#/components/schemas/FacebookAdAccountDto"}},"pages":{"description":"Facebook pages data","type":"array","items":{"type":"object"}},"instagramAccounts":{"type":"array","items":{"$ref":"#/components/schemas/InstagramAccountDto"}},"tokenStored":{"type":"boolean","example":true},"needsAdAccountSelection":{"type":"boolean","example":true},"needsInstagramAccountSelection":{"type":"boolean","example":false},"hasInstagramAccounts":{"type":"boolean","example":false},"pagesWithoutInstagram":{"type":"number","example":2}},"required":["adAccounts","pages","tokenStored","needsAdAccountSelection","needsInstagramAccountSelection"]},"FacebookOAuthCallbackResponse":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Facebook OAuth callback handled successfully"},"data":{"$ref":"#/components/schemas/OAuthCallbackDataDto"}},"required":["success","message","data"]},"AdAccountsListDataDto":{"type":"object","properties":{"adAccounts":{"type":"array","items":{"$ref":"#/components/schemas/FacebookAdAccountDto"}},"hasPrimary":{"type":"boolean","example":true},"total":{"type":"number","example":3},"readyForCampaigns":{"type":"number","example":1},"needsSetup":{"type":"number","example":2},"assignmentFailed":{"type":"number","example":0}},"required":["adAccounts","hasPrimary","total","readyForCampaigns","needsSetup","assignmentFailed"]},"AdAccountsListResponse":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Ad accounts retrieved successfully"},"data":{"$ref":"#/components/schemas/AdAccountsListDataDto"}},"required":["success","message","data"]},"RemoveAccountResponse":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Ad account removed successfully"}},"required":["success","message"]},"InstagramAccountsListDataDto":{"type":"object","properties":{"instagramAccounts":{"type":"array","items":{"$ref":"#/components/schemas/InstagramAccountDto"}},"hasPrimary":{"type":"boolean","example":true},"total":{"type":"number","example":2}},"required":["instagramAccounts","hasPrimary","total"]},"InstagramAccountsListResponse":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Instagram accounts retrieved successfully"},"data":{"$ref":"#/components/schemas/InstagramAccountsListDataDto"}},"required":["success","message","data"]},"SelectPrimaryInstagramAccountDto":{"type":"object","properties":{}},"SelectPrimaryInstagramAccountDataDto":{"type":"object","properties":{"instagramAccountId":{"type":"string","example":"17841400000000000"},"username":{"type":"string","example":"mybusiness"},"pageId":{"type":"string","example":"123456789012345"},"pageName":{"type":"string","example":"My Business Page"}},"required":["instagramAccountId","username","pageId","pageName"]},"SelectPrimaryInstagramAccountResponse":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Primary Instagram account selected successfully"},"data":{"$ref":"#/components/schemas/SelectPrimaryInstagramAccountDataDto"}},"required":["success","message","data"]},"InstagramSetupStatusDataDto":{"type":"object","properties":{"hasInstagramAccounts":{"type":"boolean","example":true},"instagramAccountCount":{"type":"number","example":2},"pagesWithInstagramCount":{"type":"number","example":2},"pagesWithoutInstagramCount":{"type":"number","example":1},"pagesWithoutInstagram":{"example":[{"pageId":"123456789012345","pageName":"My Business Page"}],"type":"array","items":{"type":"object"}},"instagramAccounts":{"example":[{"instagramAccountId":"17841400000000000","username":"mybusiness","pageId":"123456789012345","pageName":"My Business Page","isPrimary":true}],"type":"array","items":{"type":"object"}}},"required":["hasInstagramAccounts","instagramAccountCount","pagesWithInstagramCount","pagesWithoutInstagramCount","pagesWithoutInstagram","instagramAccounts"]},"InstagramSetupStatusResponse":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Found 2 Instagram account(s)"},"data":{"$ref":"#/components/schemas/InstagramSetupStatusDataDto"}},"required":["success","message","data"]},"SelectPrimaryAdAccountDto":{"type":"object","properties":{"adAccountId":{"type":"string","example":"act_123456789","description":"Facebook Ad Account ID to set as primary"}},"required":["adAccountId"]},"SelectPrimaryDataDto":{"type":"object","properties":{"adAccountId":{"type":"string","example":"act_1087932189349950"},"assignmentStatus":{"type":"string","example":"ASSIGNED","enum":["ASSIGNED","ASSIGNMENT_FAILED"]},"canCreateCampaigns":{"type":"boolean","example":true},"grantedTasks":{"example":["MANAGE","ADVERTISE","ANALYZE"],"type":"array","items":{"type":"string"}},"message":{"type":"string","example":"Account selected successfully"}},"required":["adAccountId","assignmentStatus","canCreateCampaigns","grantedTasks","message"]},"SelectPrimaryResponse":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Primary ad account set and ready for campaigns"},"data":{"$ref":"#/components/schemas/SelectPrimaryDataDto"}},"required":["success","message","data"]},"PrimaryAccountDataDto":{"type":"object","properties":{"account":{"$ref":"#/components/schemas/FacebookAdAccountDto"},"integrationStatus":{"type":"string","example":"READY_FOR_CAMPAIGNS","enum":["SETUP_INCOMPLETE","SYSTEM_USER_ASSIGNED","ASSIGNMENT_FAILED","READY_FOR_CAMPAIGNS"]},"systemUserPermission":{"$ref":"#/components/schemas/SystemUserPermissionDto"},"capabilities":{"$ref":"#/components/schemas/CapabilitiesDto"},"readyForCampaigns":{"type":"boolean","example":true}},"required":["account","integrationStatus","systemUserPermission","capabilities","readyForCampaigns"]},"PrimaryAccountResponse":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Primary ad account retrieved successfully"},"data":{"$ref":"#/components/schemas/PrimaryAccountDataDto"},"hasPrimary":{"type":"boolean","example":true}},"required":["success","message","hasPrimary"]},"TokenStatusDataDto":{"type":"object","properties":{"hasValidToken":{"type":"boolean","example":true},"expiresAt":{"format":"date-time","type":"string","example":"2024-02-15T10:00:00Z"},"daysUntilExpiry":{"type":"number","example":45},"needsReauth":{"type":"boolean","example":false},"reAuthUrl":{"type":"string","example":null}},"required":["hasValidToken","needsReauth"]},"TokenStatusResponse":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Token is healthy and valid for 45 more days"},"data":{"$ref":"#/components/schemas/TokenStatusDataDto"}},"required":["success","message","data"]},"NewAccountDto":{"type":"object","properties":{"accountId":{"type":"string","example":"act_1087932189349950"},"name":{"type":"string","example":"My New Store Ads"},"currency":{"type":"string","example":"USD"},"businessName":{"type":"string","example":"My Business"}},"required":["accountId","name","currency","businessName"]},"PermissionUpdateDto":{"type":"object","properties":{"accountId":{"type":"string","example":"act_1087932189349950"},"oldStatus":{"type":"string","example":"SETUP_INCOMPLETE"},"newStatus":{"type":"string","example":"READY_FOR_CAMPAIGNS"},"capabilities":{"$ref":"#/components/schemas/CapabilitiesDto"}},"required":["accountId","oldStatus","newStatus","capabilities"]},"TokenStatusDto":{"type":"object","properties":{"isValid":{"type":"boolean","example":true},"expiresAt":{"format":"date-time","type":"string","example":"2024-02-15T10:00:00Z"},"daysUntilExpiry":{"type":"number","example":45}},"required":["isValid"]},"RefreshAccountsDataDto":{"type":"object","properties":{"newAccountsFound":{"type":"number","example":1},"accountsUpdated":{"type":"number","example":2},"permissionsUpdated":{"type":"number","example":1},"accountsRemoved":{"type":"number","example":0},"totalAccounts":{"type":"number","example":4},"newAccounts":{"type":"array","items":{"$ref":"#/components/schemas/NewAccountDto"}},"permissionUpdates":{"type":"array","items":{"$ref":"#/components/schemas/PermissionUpdateDto"}},"tokenStatus":{"$ref":"#/components/schemas/TokenStatusDto"}},"required":["newAccountsFound","accountsUpdated","permissionsUpdated","accountsRemoved","totalAccounts","newAccounts","permissionUpdates","tokenStatus"]},"RefreshAccountsResponse":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Found 1 new ad account and updated 2 existing accounts"},"data":{"$ref":"#/components/schemas/RefreshAccountsDataDto"}},"required":["success","message","data"]},"CreateMetaPixelDto":{"type":"object","properties":{}},"DisconnectIntegrationDto":{"type":"object","properties":{"platform":{"type":"string","enum":["SHOPIFY","GOOGLE_ADS","FACEBOOK","INSTAGRAM"]}},"required":["platform"]}}}}